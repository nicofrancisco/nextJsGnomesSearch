{"ast":null,"code":"var _jsxFileName = \"/Users/nicolasfbergues/Desktop/Nico/Trabajo/Aerolab/NextDemo/learnnextjs-demo/pages/containers/Home/Home.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { Transition, CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { connect } from \"react-redux\";\nimport Filters from \"./../Filters/Filters\";\nimport Card from \"./../../components/Card/Card\";\nimport * as actions from \"./../../redux/actions/actions\";\nimport { HomeRow, HomeWrapper } from \"./HomeStyled\";\nimport Pagination from \"./../../components/Pagination/Pagination\";\nimport { filterGnomesBy } from \"./../../utils\";\n\nconst Home = props => {\n  console.log(\"props\");\n  console.log(props.store);\n  const {\n    searchTerm,\n    gnomes,\n    orderByFilter,\n    gender,\n    currentPage,\n    direction\n  } = props; //const [gender, setGender] = useState([]);\n\n  useEffect(() => {\n    const updatedPageNext = props.getCurrentPage(currentPage).payload + 1;\n    const updatedPagePrevious = props.getCurrentPage(currentPage).payload - 1;\n    let paginationDirection = 0;\n\n    if (props.direction != \"\") {\n      paginationDirection = props.direction == \"next\" ? updatedPageNext : updatedPagePrevious; //props.fetchGender(format).then(response =>{ JSON.stringify(response); console.log(response)})\n    } else {\n      paginationDirection = currentPage; //props.fetchGender(format).then(response =>{ JSON.stringify(response); console.log(response)})\n    }\n\n    const gnomeNames = gnomes.map(gnome => gnome.name);\n    const pageGnomes = gnomeNames.slice(itemsByPage * paginationDirection, itemsByPage + paginationDirection * itemsByPage); // slice will control the pagination it calculate the quantity of items we want to show by the current page\n\n    pageGnomes.map(gnome => gnome => gnome.name);\n\n    const getFirstName = arr => {\n      var arrCroped = [];\n\n      for (var a = 0; a < arr.length; a++) {\n        var corte = arr[a].indexOf(\" \");\n        arrCroped[a] = arr[a].substr(0, corte);\n      }\n\n      return arrCroped;\n    };\n\n    const justRenderedPageNames = getFirstName(pageGnomes);\n\n    const parseToService = arrToFormat => {\n      var arrayFormated = [];\n\n      for (var b = 0; b < arrToFormat.length; b++) {\n        arrayFormated[b] = \"name[]=\" + arrToFormat[b];\n      }\n\n      return arrayFormated;\n    };\n\n    const format = parseToService(justRenderedPageNames).toString().replace(/,/g, \"&\");\n    console.log(\"calling again\");\n    console.log(format);\n    props.fetchGender(format).then(response => {\n      JSON.stringify(response);\n      console.log(response);\n    });\n    console.log(\"gender x\");\n    console.log(gender);\n  }, []);\n  console.log(\"AFTER\");\n  console.log(gender);\n  const referenceFetchGender = props.fetchGender;\n  const itemsByPage = 1; //if(currentPage != 1){\n  //currentPage = props.getCurrentPage;\n\n  console.log(\"props.getCurrentPage\");\n  console.log(props.getCurrentPage(currentPage));\n  console.log(\"DIRECTION\");\n  console.log(props.direction); //}\n  // Filter the gnomes ordering them by youngest, oldest, lighter, heaviest, popularity\n  // Returns and array with all the filtered gnomes and finally generate\n  // our card based this filtered array\n\n  const searchFilters = filterGnomesBy(gnomes, orderByFilter).filter(gnome => {\n    // filter by profession\n    // If this gnome has this profession from redux state\n    // return the profession of this gnome\n    const isJob = gnome.professions.find(profession => profession === props.filterBy); // And then if this gnome know this profession return true\n    // Otherwise return false and ignore pass this gnome to the new array\n\n    const hasProfession = gnome.professions.some(profession => profession === isJob); // if filterBy state is all returns all gnomes if not return depending\n    // of the profession we're looking for\n\n    return props.filterBy === \"All\" ? gnome : hasProfession;\n  }).filter(gnome => {\n    // Filter name\n    // This comentted expression is for search exactly\n    // if match from the beginning of the string\n    // gnome.name.toLowerCase().search(searchTerm.toLowerCase()) === 0\n    // Get the gnomes that contains this bit of string within\n    const search = gnome.name.toLowerCase().indexOf(searchTerm.toLowerCase()) >= 0;\n    return search;\n  });\n  return __jsx(HomeWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, __jsx(Helmet, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, __jsx(\"title\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Nicolas Bergues\"), __jsx(\"link\", {\n    rel: \"shortcut icon\",\n    href: \"favicon.ico\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"Assesment App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  })), __jsx(HomeRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, __jsx(Filters, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  })), __jsx(Pagination, {\n    page: currentPage,\n    updateGlobalState: props.getCurrentPage,\n    maxPages: Math.floor(searchFilters.length / itemsByPage),\n    propsGender: format,\n    callGender: referenceFetchGender,\n    updateDirection: props.getDirection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }), __jsx(HomeRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, __jsx(TransitionGroup, {\n    className: \"cards\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, searchFilters.length > 0 ? searchFilters.slice(itemsByPage * currentPage, itemsByPage + currentPage * itemsByPage).map(gnome => __jsx(CSSTransition, {\n    key: gnome.id,\n    timeout: 500,\n    classNames: \"item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, __jsx(Card, {\n    key: gnome.id,\n    gnome: gnome && gnome,\n    to: `${gnome.id}-${gnome.name.split(\" \").join(\"-\")}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }))) : __jsx(\"div\", {\n    className: \"notFound\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"no gnomes founded for current search\"))), __jsx(Pagination, {\n    page: currentPage,\n    updateGlobalState: props.getCurrentPage,\n    maxPages: Math.floor(searchFilters.length / itemsByPage),\n    propsGender: format,\n    callGender: referenceFetchGender,\n    updateDirection: props.getDirection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }));\n};\n\nfunction mapStateToProps(state) {\n  console.log(\"state\");\n  console.log(state);\n  return {\n    searchTerm: state.searchTerm,\n    gnomes: state.gnomes,\n    gender: state.gender,\n    filterBy: state.filterBy,\n    orderByFilter: state.orderBy,\n    currentPage: state.currentPage,\n    direction: state.direction\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Home);","map":{"version":3,"sources":["/Users/nicolasfbergues/Desktop/Nico/Trabajo/Aerolab/NextDemo/learnnextjs-demo/pages/containers/Home/Home.js"],"names":["React","useState","useEffect","Helmet","Transition","CSSTransition","TransitionGroup","connect","Filters","Card","actions","HomeRow","HomeWrapper","Pagination","filterGnomesBy","Home","props","console","log","store","searchTerm","gnomes","orderByFilter","gender","currentPage","direction","updatedPageNext","getCurrentPage","payload","updatedPagePrevious","paginationDirection","gnomeNames","map","gnome","name","pageGnomes","slice","itemsByPage","getFirstName","arr","arrCroped","a","length","corte","indexOf","substr","justRenderedPageNames","parseToService","arrToFormat","arrayFormated","b","format","toString","replace","fetchGender","then","response","JSON","stringify","referenceFetchGender","searchFilters","filter","isJob","professions","find","profession","filterBy","hasProfession","some","search","toLowerCase","Math","floor","getDirection","id","split","join","mapStateToProps","state","orderBy"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { Transition, CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { connect } from \"react-redux\";\nimport Filters from \"./../Filters/Filters\";\nimport Card from \"./../../components/Card/Card\";\nimport * as actions from \"./../../redux/actions/actions\";\nimport { HomeRow, HomeWrapper } from \"./HomeStyled\";\nimport Pagination from \"./../../components/Pagination/Pagination\";\nimport { filterGnomesBy } from \"./../../utils\";\n\n\nconst Home = (props) => {\n\n  console.log(\"props\")\n  console.log(props.store)\n  const { searchTerm, gnomes, orderByFilter, gender, currentPage, direction } = props;\n\n  //const [gender, setGender] = useState([]);\n\n  useEffect(() => {\n    const updatedPageNext = props.getCurrentPage(currentPage).payload + 1;\n    const updatedPagePrevious = props.getCurrentPage(currentPage).payload  - 1;\n\n    let paginationDirection = 0;\n    if(props.direction != \"\"){\n      paginationDirection = props.direction == \"next\" ? updatedPageNext : updatedPagePrevious;\n      //props.fetchGender(format).then(response =>{ JSON.stringify(response); console.log(response)})\n    }else{\n      paginationDirection = currentPage\n      //props.fetchGender(format).then(response =>{ JSON.stringify(response); console.log(response)})\n    }\n\n    const gnomeNames = gnomes.map(gnome => gnome.name)\n    const pageGnomes = gnomeNames.slice(\n    itemsByPage * paginationDirection,\n    itemsByPage + paginationDirection * itemsByPage\n    ) // slice will control the pagination it calculate the quantity of items we want to show by the current page\n\n    pageGnomes.map(gnome => (\n      gnome => gnome.name\n    ))\n\n    const getFirstName = arr =>{\n      var arrCroped = [];\n        for(var a=0; a<arr.length; a++){\n\n          var corte = arr[a].indexOf(\" \");\n          arrCroped[a] = arr[a].substr(0, corte);\n        }\n        return arrCroped;\n    }\n\n    const justRenderedPageNames = getFirstName(pageGnomes);\n\n    const parseToService = arrToFormat =>{\n      var arrayFormated = [];\n\n        for(var b=0; b<arrToFormat.length; b++){\n          arrayFormated[b] = \"name[]=\"+arrToFormat[b];\n        }\n\n        return arrayFormated;\n\n    }\n\n    const format = parseToService(justRenderedPageNames).toString().replace(/,/g, \"&\");\n    console.log(\"calling again\")\n    console.log(format)\n    props.fetchGender(format).then(response =>{ JSON.stringify(response); console.log(response)})\n\n    console.log(\"gender x\")\n    console.log(gender)\n\n  }, [])\n\n  console.log(\"AFTER\")\n  console.log(gender)\n\n  const referenceFetchGender = props.fetchGender;\n  const itemsByPage = 1;\n\n  //if(currentPage != 1){\n    //currentPage = props.getCurrentPage;\n    console.log(\"props.getCurrentPage\")\n    console.log(props.getCurrentPage(currentPage))\n    console.log(\"DIRECTION\")\n    console.log(props.direction)\n  //}\n\n\n\n\n  // Filter the gnomes ordering them by youngest, oldest, lighter, heaviest, popularity\n  // Returns and array with all the filtered gnomes and finally generate\n  // our card based this filtered array\n  const searchFilters = filterGnomesBy(gnomes, orderByFilter)\n    .filter(gnome => {\n      // filter by profession\n      // If this gnome has this profession from redux state\n      // return the profession of this gnome\n      const isJob = gnome.professions.find(\n        profession => profession === props.filterBy\n      );\n\n      // And then if this gnome know this profession return true\n      // Otherwise return false and ignore pass this gnome to the new array\n      const hasProfession = gnome.professions.some(\n        profession => profession === isJob\n      );\n      // if filterBy state is all returns all gnomes if not return depending\n      // of the profession we're looking for\n      return props.filterBy === \"All\" ? gnome : hasProfession;\n    })\n    .filter(gnome => {\n      // Filter name\n      // This comentted expression is for search exactly\n      // if match from the beginning of the string\n      // gnome.name.toLowerCase().search(searchTerm.toLowerCase()) === 0\n\n      // Get the gnomes that contains this bit of string within\n      const search =\n        gnome.name.toLowerCase().indexOf(searchTerm.toLowerCase()) >= 0;\n      return search;\n    });\n\n  return (\n    <HomeWrapper>\n      <Helmet>\n        <title>Nicolas Bergues</title>\n        <link rel=\"shortcut icon\" href=\"favicon.ico\" />\n        <meta\n          name=\"description\"\n          content=\"Assesment App\"\n        />\n      </Helmet>\n      <HomeRow>\n        <Filters />\n      </HomeRow>\n      <Pagination\n        page={currentPage}\n        updateGlobalState={props.getCurrentPage}\n        maxPages={Math.floor(searchFilters.length / itemsByPage)}\n        propsGender={format}\n        callGender={referenceFetchGender}\n        updateDirection={props.getDirection}\n      />\n      <HomeRow>\n      <TransitionGroup className=\"cards\">\n        {searchFilters.length > 0 ? (\n          searchFilters\n            .slice(\n              itemsByPage * currentPage,\n              itemsByPage + currentPage * itemsByPage\n            )\n            .map(gnome => (\n              <CSSTransition key={gnome.id} timeout={500} classNames=\"item\">\n                <Card\n                  key={gnome.id}\n                  gnome={gnome && gnome}\n                  to={`${gnome.id}-${gnome.name.split(\" \").join(\"-\")}`}\n                />\n              </CSSTransition>\n            ))\n        ) : (\n          <div className={\"notFound\"}>no gnomes founded for current search</div>\n        )}\n        </TransitionGroup>\n      </HomeRow>\n      <Pagination\n        page={currentPage}\n        updateGlobalState={props.getCurrentPage}\n        maxPages={Math.floor(searchFilters.length / itemsByPage)}\n        propsGender={format}\n        callGender={referenceFetchGender}\n        updateDirection={props.getDirection}\n      />\n    </HomeWrapper>\n  );\n};\n\n\nfunction mapStateToProps(state) {\n  console.log(\"state\")\n  console.log(state)\n  return {\n    searchTerm: state.searchTerm,\n    gnomes: state.gnomes,\n    gender: state.gender,\n    filterBy: state.filterBy,\n    orderByFilter: state.orderBy,\n    currentPage: state.currentPage,\n    direction: state.direction\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Home);\n"]},"metadata":{},"sourceType":"module"}